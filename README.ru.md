Bakapy
======

Инструмент для организации резервного копирования.

Общий смысл:
- Пишем скрипт для сбора информации
- В файле конфигурации указываем этот скрипт, его параметры, сколько хранить файлы, созданные этим скриптом и когда выполнять этот скрипт.
- Получаем отчеты об ошибках на почту
- Периодически просматриваем общую статистику - сколько занимают задачи копирования по времени, как растет объем.

Установка
---------

Установка для deb:

    wget https://github.com/subuk/bakapy/releases/download/v${version}/bakapy_${version}_amd64.${debianRelease}.deb
    dpkg -i bakapy_${version}_amd64.${debianRelease}.deb

Для rpm:

    rpm -ivh https://github.com/subuk/bakapy/releases/download/v${version}/bakapy-${version}-1.${dist}.src.rpm


Для сборки нужен компилятор Go (http://golang.org/dl/).

Собирается так:

    ./build.sh


Конфигурация
------------

Пример файла конфигурации с комментарием можно найти в репозитории:

    - bakapy.conf.ex.yaml
    - jobs.conf.ex.yaml


Команды
-------

Для каждой задачи бекапа определена команда - шелл скрипт, который собирает файлы на сервере.
Единственное ограничение фантазии для автора команды - отправка файлов в хранилище должна
происходить через функцию _send_file.

Пример простейшей команды:

    for d in usr etc root ;do
      tar -cf - /$d | _send_file "main/$d.tar"
    done


Готовые команды на основные задачи создания резервных копий можно найти в репозитории: /commands.
